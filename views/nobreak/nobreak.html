<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      Lista de Nobreak
    </h1>
    <ol class="breadcrumb">
      <li><a href="/"><i class="fa fa-dashboard"></i> Home</a></li>
      <li class="active"><a href="/nobreak">Nobreak</a></li>
    </ol>
  </section>
  <!-- Main content -->
  <section class="content">
    <div class="box box-primary">
      <div class="col form-control top">
        <div class="row">
          <div class="col col-md-2">
            <form action="/nobreak/create" method="get">
              <input type="submit" name="btnnobreak" class="btn btn-success" value="Cadastrar Nobreak">
              <input type="text" name="nobreak" value="nobreak" hidden>
            </form>
          </div>
          <form action="/nobreak" method="get" {if="!$nobreaks"}hidden{/if}>
            <div class="col col-md-2"><label for="location">Localização</label><input type="text" name="location" id="location" class="form-control"></div>
            <div class="col col-md-2"><label for="serialnumber">Nº Serial</label><input type="text" name="serialnumber" id="serialnumber" class="form-control"></div>
            <div class="col col-md-2"><label for="daydate">Data Início</label><input type="text" name="daydate" id="daydate" class="form-control" onChange="replaceSlash(daydate)"></div>
            <div class="col col-md-2"><label for="date_fim">Data Fim</label><input type="text" name="date_fim" id="date_fim" class="form-control" onChange="replaceSlash(date_fim)"></div>
            <div class="col col-md-1"><label for="limit">Qtde</label>
              <select name="limit" id="limit" class="form-control">
                <option value="10" selected>10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
              </select>
            </div>
            <input type="submit" name="search" class="btn btn-primary" value="Pesquisar">
          </form>
        </div>
      </div>
    </div>
    <div id="msg{if="$msg.state == 'SUCCESS'"}-success{else}-danger{/if}" 
          class="box box-{if="$msg.state == 'SUCCESS'"}-success{else}danger{/if}" 
          {if="$msg.state != 'SUCCESS' && $msg.state != 'ERROR'"}readonly hidden{/if}>
      <div class="msg"><input type="text" class="form-control msg-{if="$msg.state == 'SUCCESS' "}success alert-success{else}danger alert-danger{/if}" name="msg" value="{$msg.msg}" readonly ></div>
      <div class="msg"><textarea class="form-control" name="err" id="err" rows="3" {if="$msg.err != NULL"}hidden{/if} readonly>{$msg.err}</textarea></div>
    </div>
    <div class="box box-primary" {if="!$pgs"}hidden{/if}>
      <div class="row">
        <div class="col col-md-12">
          <nav aria-label="Page navigation">
            <ul class="pagination">
              <li>
                <a href="#" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              {$i = 1}
              {loop="$pgs"}
              <li><a href="nobreak?pg={$i}{if="$pgs.list.location"}&location={$pgs.list.location}{/if}{if="$pgs.list.serialnumber"}&serialnumber={$pgs.list.serialnumber}{/if}{if="$pgs.list.daydate"}&daydate={$pgs.list.daydate}{/if}{if="$pgs.list.date_fim"}&date_fim={$pgs.list.date_fim}{/if}{if="$pgs.list.limit"}&limit={$pgs.list.limit}{/if}{if="$pgs.list.search"}&search={$pgs.list.search}{/if}">{$i++}</a></li>
              {/loop}
              <li>
                <a href="#" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <div class="box box-primary" {if="$nobreaks[0]['nobreak_id'] == NULL"}hidden{/if}>
      <div class="box-body no-padding">
        <table class="table table-straped">
          <thead class="thead-dark">
            <tr class="alert-warning">
              <th>Data</th>
              <th>Localização</th>
              <th>Modelo do NoBreak</th>
              <th>Número de Série</th>
              <th>Resultado do Teste</th>
              <th>Ação</th>
            </tr>
          </thead>
          <tbody>
            {loop="$nobreaks"}
            <tr>
              <td>{$value.daydate}</td>
              <td>{$value.deslocation}</td>
              <td>{$value.nobreakmodel}</td>
              <td>{$value.serialnumber}</td>
              <td>{if="$value.resulttest == 0"}OK{else}NÃO OK{/if}</td>
              <td>
                <a href="/nobreak/{$value.nobreak_id}" class="btn btn-primary btn-xs"><i class="fa fa-edit"></i></a>
                <a href="/nobreak/{$value.nobreak_id}/delete" onclick="return confirm('Deseja realmente excluir este registro?')" class="btn btn-danger btn-xs"><i class="fa fa-trash"></i></a>
              </td>
            </tr>
            {/loop}
          </tbody>
        </table>
      </div>
    </div>
    <div class="box box-primary" {if="!$pgs"}hidden{/if}>
      <div class="row">
        <div class="col col-md-12">
          <nav aria-label="Page navigation">
            <ul class="pagination">
              <li>
                <a href="#" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              {$i = 1}
              {loop="$pgs"}
              <li><a href="nobreak?pg={$i}{if="$pgs.list.location"}&location={$pgs.list.location}{/if}{if="$pgs.list.serialnumber"}&serialnumber={$pgs.list.serialnumber}{/if}{if="$pgs.list.daydate"}&daydate={$pgs.list.daydate}{/if}{if="$pgs.list.date_fim"}&date_fim={$pgs.list.date_fim}{/if}{if="$pgs.list.limit"}&limit={$pgs.list.limit}{/if}{if="$pgs.list.search"}&search={$pgs.list.search}{/if}">{$i++}</a></li>
              {/loop}
              <li>
                <a href="#" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </section>
</div>
